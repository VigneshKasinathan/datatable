



<div *ngIf="errorMessage" [ngStyle]="errorStyle">{{ errorMessage }}</div>



  <div class="table-width" *ngIf="filteredPost$ |async as filteredPost; else loading">
    <div class="search-block">
      <input 
      type="text" 
      placeholder="Search..." 
      class="search-bar"
      [(ngModel)]="searchTerms" 
      (ngModelChange)="onSearchTermChanged()"
      />
      <p *ngIf="searchTerms">Search : {{ searchTerms }}</p>
    </div>
      
      <table>
      <thead style="border-radius: 4px;"> 
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Price</th>
          <th>Description</th>
          <th>Category</th>
          <th>Image</th>
          <th>Rating Rate</th>
          <th>Rating Count</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngIf="filteredPost.length > 0 ; else noData">
          <tr *ngFor="let item of filteredPost; let i = index" [ngClass]="{'odd-row': i % 2 !== 0, 'even-row': i % 2 === 0}">
            <td ><strong>{{ item.id }}</strong>.</td>
            <td>{{ item.title }}</td>
            <td>{{ item.price }}</td>
            <td>{{ item.description }}</td>
            <td [innerHTML]="item.category | italic"></td>
            <td><img [src]="item.image" alt="{{ item.title }}" width="50"></td>
            <td>{{ item.rating.rate }}</td>
            <td>{{ item.rating.count }}</td>
          </tr>
        </ng-container>
       
      </tbody>
    </table>

    <div class="table-controller">
      <div class="dynamic-row">
          <label for="rowsPerPage">Rows per page:</label>
          <select id="'rowsPerPage" [(ngModel)]="pageSize" (change)="onPageSizeChange($event)">
            <option *ngFor="let size of pageSizes" [value]="size">{{size}}</option>
          </select>
      </div>
      <div>
        <button (click)="previousPage()" [disabled]="pageIndex === 0"><fa-icon [icon]="faArrowLeft"></fa-icon></button>
          <span *ngIf="filteredPostLength > pageSize"> {{pageIndex + 1}} - {{pageSize}} of {{totalPages}}</span>
        <button (click)="nextPage()" [disabled]="pageIndex >= totalPages - 1"><fa-icon [icon]="faArrowRight"></fa-icon></button>
      </div>
    </div>
  </div>
  
  <ng-template #noData>
    <tr>
      <td colspan="8" class="no-data" align="center">No data available</td>
    </tr>
  </ng-template>
    <ng-template #loading>
      <div class="spinner-container">
        <div class="spinner"></div>  
      </div>
    </ng-template>


  